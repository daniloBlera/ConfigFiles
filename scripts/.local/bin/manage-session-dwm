#!/bin/bash
# A simple dmenu script to lock/close the WM or to shutdown.
# Usage:
#   manage_session [DMENU_OPTIONS]
OPTIONS='Lock Screen
Close DWM
Reboot
Shut Down'

COLOUR1="$(xrdb -query | grep 'dmenu.foreground' | cut -d '	' -f 2)"
COLOUR2="$(xrdb -query | grep 'dmenu.background' | cut -d '	' -f 2)"

[ -z "$COLOUR1" ] && COLOUR1='#dadada'
[ -z "$COLOUR2" ] && COLOUR2='#000000'

option=$(echo "$OPTIONS" | dmenu -i -nb "$COLOUR2" -nf "$COLOUR1" -sb "$COLOUR1" -sf "$COLOUR2" -fn 'Ubuntu-11' -p 'What now, chef?')

case "$option" in
    'Lock Screen')
        slock -m "$(cat ~/.local/bin/chars-dwm.txt)";;
    'Close DWM')
        pkill dwm;;
    'Reboot')
        reboot;;
    'Shut Down')
        poweroff;;
esac
