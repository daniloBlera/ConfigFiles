#!/bin/sh
# Capture a screenshot and save it on user's pictures

fname="screenshot_$(date +%Y-%m-%d_%H-%M-%S).png"
fpath="$HOME/Pictures/$fname"
delay=3
interactive=false

notify() {
    pgrep dunst 1> /dev/null && dunstify "Captured screenshot $1" || echo "Captured $1"
}

for var in "$@"; do
    case $var in
        -i|--interactive)
            interactive=true;;
    esac
done

if [ $interactive = false ]; then
    scrot $fpath
    notify "$fname"
else
    option="$(echo 'Selection\nDelayed' | dmenu)"

    case $option in
        Selection)
            scrot -s $fpath
            notify "$fname";;
        Delayed)
            scrot -d $delay $fpath
            notify "$fname";;
    esac
fi
